<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tips for Production • finnts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Tips for Production">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6X0DS5856B"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6X0DS5856B');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">finnts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0.9014</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/finnts.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ai-agent.html">AI Agent Capabilities</a>
    </li>
    <li>
      <a href="../articles/back-testing-and-hyperparameter-tuning.html">Back Testing and Hyperparameter Tuning</a>
    </li>
    <li>
      <a href="../articles/best-model-selection.html">Best Model Selection</a>
    </li>
    <li>
      <a href="../articles/external-regressors.html">External Regressors</a>
    </li>
    <li>
      <a href="../articles/feature-engineering.html">Feature Engineering</a>
    </li>
    <li>
      <a href="../articles/feature-selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../articles/forecast-components.html">Using Individual finnts Forecast Components</a>
    </li>
    <li>
      <a href="../articles/forecasting-genai.html">Forecasting with GenAI: TimeGPT in finnts</a>
    </li>
    <li>
      <a href="../articles/hierarchical-forecasting.html">Hierarchical Forecasting</a>
    </li>
    <li>
      <a href="../articles/models-used-in-finnts.html">Models Used in finnts</a>
    </li>
    <li>
      <a href="../articles/parallel-processing.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/tips-for-production.html">Tips for Production</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/microsoft/finnts/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Tips for Production</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/microsoft/finnts/blob/main/vignettes/tips-for-production.Rmd" class="external-link"><code>vignettes/tips-for-production.Rmd</code></a></small>
      <div class="hidden name"><code>tips-for-production.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="manage-dependencies">Manage Dependencies<a class="anchor" aria-label="anchor" href="#manage-dependencies"></a>
</h2>
<p>Finn continues to get updated on a regular basis. A best practice is
to ensure you are using a specific version of Finn for your production
forecast. This can be done through the use of the <a href="https://rstudio.github.io/renv/" class="external-link">renv package</a> while using Finn
on your local machine, or using <a href="https://colinfay.me/docker-r-reproducibility/" class="external-link">docker
containers</a> for running Finn in the cloud.</p>
</div>
<div class="section level2">
<h2 id="azure-ml-pipelines">Azure ML Pipelines<a class="anchor" aria-label="anchor" href="#azure-ml-pipelines"></a>
</h2>
<p>Finn was built to run at scale in Azure, leveraging spark as the
parallel back end. Check out the parallel processing vignette to learn
how to get Finn running on Azure services like Databricks. The best way
to run Finn in production is through the use of <a href="https://learn.microsoft.com/en-us/azure/machine-learning/" class="external-link">Azure
Machine Learning</a>, specifically Azure ML Pipelines.</p>
<p>Below are a few tips for leveraging Azure ML Pipelines</p>
<ul>
<li>Leverage the Azure ML CLI v2 interface to submit R scripts in a
pipeline.</li>
<li>Use the sub components of Finn instead of
<code><a href="../reference/forecast_time_series.html">forecast_time_series()</a></code> so you can have different pipeline
steps ran for each step of the Finn forecast process.</li>
<li>If you do use the sub components of Finn, then definitely set
<code>add_unique_id</code> to FALSE within <code><a href="../reference/set_run_info.html">set_run_info()</a></code>.
That will let you call the exact same run info in each separate pipeline
step. Make sure that you are using your own unique <code>run_name</code>
within <code><a href="../reference/set_run_info.html">set_run_info()</a></code>, one that is different than previous
Finn runs but the same name when using <code><a href="../reference/set_run_info.html">set_run_info()</a></code> in
each pipeline step.</li>
<li>Connect your Azure ML Pipeline to a spark compute cluster and mount
an Azure Data Lake Storage connection. Either through Azure Databricks
or Azure Synapse. Also consider using different spark cluster
configurations depending on the Finn forecast sub component you are
running in each pipeline step.
<ul>
<li>For <code><a href="../reference/prep_data.html">prep_data()</a></code> and <code><a href="../reference/prep_models.html">prep_models()</a></code>, use the
default spark cluster settings. Where each spark task gets sent to a
specific core on an executor.</li>
<li>For all other functions like <code><a href="../reference/train_models.html">train_models()</a></code>,
<code><a href="../reference/ensemble_models.html">ensemble_models()</a></code>, and <code><a href="../reference/final_models.html">final_models()</a></code> consider
adjusting the spark cluster settings like “spark.executor.cores” equal
to 1 and set <code>inner_parallel</code> to TRUE within each function.
That way only a single task/time series gets sent to each spark executor
node, and all cores within that node can be used during the modeling
process for that task/time series. Use <code>num_cores</code> within
each function to control how many cores on the executor to use, with the
default being all available cores minus one. This can significantly
speed up run time, but if you have many time series and want to run all
of the models within Finn ensure that you have a spark cluster that can
scale to many VM’s.</li>
</ul>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.linkedin.com/in/michaeltokic/" class="external-link">Mike Tokic</a>, <a href="https://aadharshkannan.com/" class="external-link">Aadharsh Kannan</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
