<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using Individual finnts Forecast Components • finnts</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using Individual finnts Forecast Components">
<meta property="og:description" content="finnts">
<meta property="og:image" content="https://microsoft.github.io/finnts/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6X0DS5856B"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6X0DS5856B');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">finnts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/finnts.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/back-testing-and-hyperparameter-tuning.html">Back Testing and Hyperparameter Tuning</a>
    </li>
    <li>
      <a href="../articles/best-model-selection.html">Best Model Selection</a>
    </li>
    <li>
      <a href="../articles/external-regressors.html">External Regressors</a>
    </li>
    <li>
      <a href="../articles/feature-engineering.html">Feature Engineering</a>
    </li>
    <li>
      <a href="../articles/feature-selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../articles/forecast-components.html">Using Individual finnts Forecast Components</a>
    </li>
    <li>
      <a href="../articles/hierarchical-forecasting.html">Hierarchical Forecasting</a>
    </li>
    <li>
      <a href="../articles/models-used-in-finnts.html">Models Used in finnts</a>
    </li>
    <li>
      <a href="../articles/parallel-processing.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/tips-for-production.html">Tips for Production</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/microsoft/finnts/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="forecast-components_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using Individual finnts Forecast Components</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/microsoft/finnts/blob/main/vignettes/forecast-components.Rmd" class="external-link"><code>vignettes/forecast-components.Rmd</code></a></small>
      <div class="hidden name"><code>forecast-components.Rmd</code></div>

    </div>

    
    
<p>The easiest way to use the finnts package is through the function <code><a href="../reference/forecast_time_series.html">forecast_time_series()</a></code>, but instead of calling that function you can also call the sub components of the Finn forecast process. This could enable you to break out your time series forecast process into separate steps in a production pipeline, or even give you more control over how you use Finn.</p>
<p>Below is an example workflow of using the sub components of Finn.</p>
<div class="section level2">
<h2 id="get-data-and-set-run-info">Get Data and Set Run Info<a class="anchor" aria-label="anchor" href="#get-data-and-set-run-info"></a>
</h2>
<p>Let’s get some example data and then set our Finn run info.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://microsoft.github.io/finnts/">finnts</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">hist_data</span> <span class="op">&lt;-</span> <span class="fu">timetk</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/timetk/man/m4_monthly.html" class="external-link">m4_monthly</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op">&gt;=</span> <span class="st">"2013-01-01"</span>, </span>
<span>                <span class="va">id</span> <span class="op">==</span> <span class="st">"M2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Date <span class="op">=</span> <span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">run_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_run_info.html">set_run_info</a></span><span class="op">(</span></span>
<span>  experiment_name <span class="op">=</span> <span class="st">"finnts_fcst"</span>, </span>
<span>  run_name <span class="op">=</span> <span class="st">"finn_sub_component_run"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="prep-the-data">Prep the Data<a class="anchor" aria-label="anchor" href="#prep-the-data"></a>
</h2>
<p>Clean and prepare our data before training models. We can even pull out our prepped data to see the features and transformations applied before models are trained.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prep_data.html">prep_data</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span>, </span>
<span>          input_data <span class="op">=</span> <span class="va">hist_data</span>, </span>
<span>          combo_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span><span class="op">)</span>, </span>
<span>          target_variable <span class="op">=</span> <span class="st">"value"</span>, </span>
<span>          date_type <span class="op">=</span> <span class="st">"month"</span>, </span>
<span>          forecast_horizon <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span></span>
<span><span class="va">R1_prepped_data_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_prepped_data.html">get_prepped_data</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span>, </span>
<span>                                        recipe <span class="op">=</span> <span class="st">"R1"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">R1_prepped_data_tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 36 × 66</span></span></span>
<span><span class="co">#&gt;    Date       Combo id      Target Date_index.num Date_diff Date_year Date_half</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-01-01 M2    M2     <span style="text-decoration: underline;">722</span>366.     <span style="text-decoration: underline;">1</span>356<span style="text-decoration: underline;">998</span>400         0      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-02-01 M2    M2     <span style="text-decoration: underline;">722</span>366.     <span style="text-decoration: underline;">1</span>359<span style="text-decoration: underline;">676</span>800   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-03-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">285</span><span style="color: #BB0000;">828.</span>     <span style="text-decoration: underline;">1</span>362<span style="text-decoration: underline;">096</span>000   2<span style="text-decoration: underline;">419</span>200      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-04-01 M2    M2     -<span style="color: #BB0000; text-decoration: underline;">28</span><span style="color: #BB0000;">033.</span>     <span style="text-decoration: underline;">1</span>364<span style="text-decoration: underline;">774</span>400   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-05-01 M2    M2     <span style="text-decoration: underline;">141</span>165.     <span style="text-decoration: underline;">1</span>367<span style="text-decoration: underline;">366</span>400   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-06-01 M2    M2     <span style="text-decoration: underline;">319</span>357.     <span style="text-decoration: underline;">1</span>370<span style="text-decoration: underline;">044</span>800   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-07-01 M2    M2     <span style="text-decoration: underline;">393</span>011.     <span style="text-decoration: underline;">1</span>372<span style="text-decoration: underline;">636</span>800   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-08-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">740</span><span style="color: #BB0000;">801.</span>     <span style="text-decoration: underline;">1</span>375<span style="text-decoration: underline;">315</span>200   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-09-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">704</span><span style="color: #BB0000;">178.</span>     <span style="text-decoration: underline;">1</span>377<span style="text-decoration: underline;">993</span>600   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-10-01 M2    M2     <span style="text-decoration: underline;">425</span>346.     <span style="text-decoration: underline;">1</span>380<span style="text-decoration: underline;">585</span>600   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 26 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 58 more variables: Date_quarter &lt;dbl&gt;, Date_month &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Date_month.lbl &lt;chr&gt;, Target_lag6 &lt;dbl&gt;, Target_lag9 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag12 &lt;dbl&gt;, Target_lag6_roll3_Avg &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag9_roll3_Avg &lt;dbl&gt;, Target_lag12_roll3_Avg &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag6_roll6_Avg &lt;dbl&gt;, Target_lag9_roll6_Avg &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag12_roll6_Avg &lt;dbl&gt;, Target_lag6_roll9_Avg &lt;dbl&gt;, …</span></span></span>
<span></span>
<span><span class="va">R2_prepped_data_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_prepped_data.html">get_prepped_data</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span>, </span>
<span>                                        recipe <span class="op">=</span> <span class="st">"R2"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">R2_prepped_data_tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 216 × 133</span></span></span>
<span><span class="co">#&gt;    Date       Combo id      Target Date_index.num Date_diff Date_year Date_half</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2013-01-01 M2    M2     <span style="text-decoration: underline;">722</span>366.     <span style="text-decoration: underline;">1</span>356<span style="text-decoration: underline;">998</span>400         0      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2013-02-01 M2    M2     <span style="text-decoration: underline;">722</span>366.     <span style="text-decoration: underline;">1</span>359<span style="text-decoration: underline;">676</span>800   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2013-03-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">285</span><span style="color: #BB0000;">828.</span>     <span style="text-decoration: underline;">1</span>362<span style="text-decoration: underline;">096</span>000   2<span style="text-decoration: underline;">419</span>200      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2013-04-01 M2    M2     -<span style="color: #BB0000; text-decoration: underline;">28</span><span style="color: #BB0000;">033.</span>     <span style="text-decoration: underline;">1</span>364<span style="text-decoration: underline;">774</span>400   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2013-05-01 M2    M2     <span style="text-decoration: underline;">141</span>165.     <span style="text-decoration: underline;">1</span>367<span style="text-decoration: underline;">366</span>400   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2013-06-01 M2    M2     <span style="text-decoration: underline;">319</span>357.     <span style="text-decoration: underline;">1</span>370<span style="text-decoration: underline;">044</span>800   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2013-07-01 M2    M2     <span style="text-decoration: underline;">393</span>011.     <span style="text-decoration: underline;">1</span>372<span style="text-decoration: underline;">636</span>800   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2013-08-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">740</span><span style="color: #BB0000;">801.</span>     <span style="text-decoration: underline;">1</span>375<span style="text-decoration: underline;">315</span>200   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2013-09-01 M2    M2    -<span style="color: #BB0000; text-decoration: underline;">704</span><span style="color: #BB0000;">178.</span>     <span style="text-decoration: underline;">1</span>377<span style="text-decoration: underline;">993</span>600   2<span style="text-decoration: underline;">678</span>400      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2013-10-01 M2    M2     <span style="text-decoration: underline;">425</span>346.     <span style="text-decoration: underline;">1</span>380<span style="text-decoration: underline;">585</span>600   2<span style="text-decoration: underline;">592</span>000      <span style="text-decoration: underline;">2</span>013         2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 206 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 125 more variables: Date_quarter &lt;dbl&gt;, Date_month &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Date_month.lbl &lt;chr&gt;, Horizon &lt;dbl&gt;, Origin &lt;dbl&gt;, Target_lag1 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag2 &lt;dbl&gt;, Target_lag3 &lt;dbl&gt;, Target_lag4 &lt;dbl&gt;, Target_lag5 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag6 &lt;dbl&gt;, Target_lag9 &lt;dbl&gt;, Target_lag12 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag1_roll3_Avg &lt;dbl&gt;, Target_lag2_roll3_Avg &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target_lag3_roll3_Avg &lt;dbl&gt;, Target_lag4_roll3_Avg &lt;dbl&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="train-individual-models">Train Individual Models<a class="anchor" aria-label="anchor" href="#train-individual-models"></a>
</h2>
<p>Now that our data is prepared for modeling, let’s now train some models. First we need to create the model workflows, determine our back testing process, and how many hyperparameter combinations to try during the validation process.</p>
<p>Then we can kick off training each model on our data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/prep_models.html">prep_models</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span>, </span>
<span>            models_to_run <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"arima"</span>, <span class="st">"ets"</span>, <span class="st">"glmnet"</span><span class="op">)</span>, </span>
<span>            num_hyperparameters <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/train_models.html">train_models</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span>, </span>
<span>             run_global_models <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="train-ensemble-models">Train Ensemble Models<a class="anchor" aria-label="anchor" href="#train-ensemble-models"></a>
</h2>
<p>After each individual model is trained, we can feed those predictions into ensemble models.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ensemble_models.html">ensemble_models</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="final-models">Final Models<a class="anchor" aria-label="anchor" href="#final-models"></a>
</h2>
<p>The last step is to create the final simple model averages and select the best models.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/final_models.html">final_models</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-forecast-results">Get Forecast Results<a class="anchor" aria-label="anchor" href="#get-forecast-results"></a>
</h2>
<p>Finally we can now retrieve the forecast results from this Finn run.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">finn_output_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_forecast_data.html">get_forecast_data</a></span><span class="op">(</span>run_info <span class="op">=</span> <span class="va">run_info</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">finn_output_tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 247 × 17</span></span></span>
<span><span class="co">#&gt;    Combo id    Model_ID   Model_Name Model_Type Recipe_ID Run_Type Train_Test_ID</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Future_…             1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Back_Te…             3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Back_Te…             3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Back_Te…             4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> M2    M2    arima--lo… <span style="color: #BB0000;">NA</span>         local      simple_a… Back_Te…             4</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 237 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 9 more variables: Best_Model &lt;chr&gt;, Horizon &lt;dbl&gt;, Date &lt;date&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Target &lt;dbl&gt;, Forecast &lt;dbl&gt;, lo_95 &lt;dbl&gt;, lo_80 &lt;dbl&gt;, hi_80 &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   hi_95 &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.linkedin.com/in/michaeltokic/" class="external-link">Mike Tokic</a>, <a href="https://aadharshkannan.com/" class="external-link">Aadharsh Kannan</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
