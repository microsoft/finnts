<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Feature Selection • finnts</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Feature Selection">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6X0DS5856B"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6X0DS5856B');
</script>
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">finnts</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.0.9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/finnts.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ai-agent.html">AI Agent Capabilities</a>
    </li>
    <li>
      <a href="../articles/back-testing-and-hyperparameter-tuning.html">Back Testing and Hyperparameter Tuning</a>
    </li>
    <li>
      <a href="../articles/best-model-selection.html">Best Model Selection</a>
    </li>
    <li>
      <a href="../articles/external-regressors.html">External Regressors</a>
    </li>
    <li>
      <a href="../articles/feature-engineering.html">Feature Engineering</a>
    </li>
    <li>
      <a href="../articles/feature-selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../articles/forecast-components.html">Using Individual finnts Forecast Components</a>
    </li>
    <li>
      <a href="../articles/hierarchical-forecasting.html">Hierarchical Forecasting</a>
    </li>
    <li>
      <a href="../articles/models-used-in-finnts.html">Models Used in finnts</a>
    </li>
    <li>
      <a href="../articles/parallel-processing.html">Parallel Processing</a>
    </li>
    <li>
      <a href="../articles/tips-for-production.html">Tips for Production</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/microsoft/finnts/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Feature Selection</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/microsoft/finnts/blob/main/vignettes/feature-selection.Rmd" class="external-link"><code>vignettes/feature-selection.Rmd</code></a></small>
      <div class="hidden name"><code>feature-selection.Rmd</code></div>

    </div>

    
    
<p>Finn leverages multiple techniques of feature selection to ensure
only the best features are used in individual model training. This
speeds up run time while also improving model accuracy. Feature
selection can be enabled by setting <code>feature_selection</code> to
TRUE in either <code><a href="../reference/forecast_time_series.html">forecast_time_series()</a></code> or
<code><a href="../reference/train_models.html">train_models()</a></code>. By default it’s turned off, meaning every
feature in each feature engineering recipe will be used in model
training.</p>
<div class="section level2">
<h2 id="feature-selection-techniques">Feature Selection Techniques<a class="anchor" aria-label="anchor" href="#feature-selection-techniques"></a>
</h2>
<p>Below are the techniques used in the feature selection process.</p>
<div class="section level3">
<h3 id="target-correlation">Target Correlation<a class="anchor" aria-label="anchor" href="#target-correlation"></a>
</h3>
<p>Removes features that are correlated with the target variable. For
daily and weekly data, a correlation filter of 0.2 is applied. For all
other date types, a correlation of 0.5 is applied.</p>
</div>
<div class="section level3">
<h3 id="leave-one-feature-out-lofo">Leave One Feature Out (lofo)<a class="anchor" aria-label="anchor" href="#leave-one-feature-out-lofo"></a>
</h3>
<p>This is a more complex process where various models (cubist, glmnet,
xgboost) are trained on the validation splits of the data. Each round,
one feature is held out of the data, and the change in prediction
accuracy (RMSE) over the hold out validation data is calculated. If the
accuracy gets worse by removing the feature, it gets flagged as an
important feature. This is not a recursive feature elimination process,
instead only one feature is ever held out at any point in time.</p>
<p>This technique is used for yearly, quarterly, and monthly data. It’s
turned off for daily or weekly data since it would take too long to run
properly. If a feature engineering recipe contains more than 250
features, lofo is also turned off to keep runtime low.</p>
</div>
<div class="section level3">
<h3 id="boruta">Boruta<a class="anchor" aria-label="anchor" href="#boruta"></a>
</h3>
<p>Uses the <a href="https://CRAN.R-project.org/package=Boruta" class="external-link">Boruta</a> package. It
finds relevant features by comparing original attributes’ importance
with importance achievable at random, estimated using their permuted
copies (shadows).</p>
<p>Boruta is not ran for daily or weekly data, in order to save
time.</p>
</div>
<div class="section level3">
<h3 id="model-variable-importance">Model Variable Importance<a class="anchor" aria-label="anchor" href="#model-variable-importance"></a>
</h3>
<p>Multiple models (cubist, glmnet, ranger) are trained on the entire
training data. These models are then fed into the variable importance
function within the <a href="https://koalaverse.github.io/vip/index.html" class="external-link">vip</a> package. For
each model, any feature with a variable importance score above zero is
flagged as important.</p>
</div>
</div>
<div class="section level2">
<h2 id="voting-process">Voting Process<a class="anchor" aria-label="anchor" href="#voting-process"></a>
</h2>
<p>Since we use multiple techniques for feature selection, we need to
determine how we will use this information to select the final features.
This is where the voting process comes in. If a feature gets flagged in
one of the above techniques successfully, it gets a vote. If a feature
receives enough votes, it is kept and ultimately used when training
individual models.</p>
<p>Daily and weekly data have a voting threshold of 3, meaning a feature
needs to get at least 3 votes from 3 separate feature selection
techniques in order to be kept. Yearly, quarterly, or monthly data have
a voting threshold of 4 (3 if lofo isn’t ran). Each feature needs to get
a majority of the votes in order to be kept. This process can reduce up
to 50%-95% of features. The final result is keeping all the features
that contain the “signal” while discarding all other features that just
contain “noise”.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.linkedin.com/in/michaeltokic/" class="external-link">Mike Tokic</a>, <a href="https://aadharshkannan.com/" class="external-link">Aadharsh Kannan</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
